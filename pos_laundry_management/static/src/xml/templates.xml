<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright 2015-2016 Kolushov Alexandr <https://it-projects.info/team/KolushovAlexandr>
     License LGPL-3.0 or later (https://www.gnu.org/licenses/lgpl.html). -->

<templates id="template" xml:space="preserve">

    <t t-name="PackLotLinePopupWidget">
        <div class="modal-dialog">
            <div class="popup popup-text popup-packlot">
                <p class="title"><t t-esc=" widget.options.title || '' " /></p>
                <div class='packlot-lines'>
                <t t-if="widget.options.pack_lot_lines">
                    <table>
                        <tr>
                            <th width="18%">Name</th>
                            <th width="10%">UoM</th>
                            <th width="10%">Price</th>
                            <th width="31%">Barcode</th>
                            <th width="31%">Tag</th>
                        </tr>
                        <t t-set="focus_lot_line" t-value="widget.focus_model || widget.options.pack_lot_lines.get_empty_model()"/>
                        <t t-foreach='widget.options.pack_lot_lines.models' t-as='lot_line'>
                            <t t-set="product" t-value="lot_line.order_line.product"/>
                            <tr class="table-row">
                                <th>
                                    <t t-esc="product.display_name"/>
                                </th>
                                <th>
                                    <t t-esc="product.uom_id[1]"/>
                                </th>
                                <th>
                                    <t t-esc="product.price"/>
                                </th>
                                <th>
                                    <input type="text" t-att-cid="lot_line.cid"
                                    t-att-value="lot_line.get('lot_name')"
                                    t-att-autofocus="lot_line === focus_lot_line ? 'autofocus': undefined"
                                    class="popup-input packlot-line-input barcode-input"
                                    placeholder="Barcode"/>
                                </th>
                                <th>
                                    <input type="text" t-att-cid="lot_line.cid"
                                    t-att-value="lot_line.get('tag')"
                                    t-att-autofocus="lot_line === focus_lot_line ? 'autofocus': undefined"
                                    class="popup-input packlot-line-input tag-input"
                                    placeholder="Tag"/>
                                </th>
                                <th>
                                    <i t-att-cid="lot_line.cid" class="hidden"/>
                                    <i class="oe_link_icon remove-lot fa fa-trash-o"/>
                                </th>
                            </tr>
                        </t>
                    </table>
                </t>
            </div>
                <div class="footer">
                    <div class="button confirm">
                        Ok
                    </div>
                    <div class="button cancel">
                        Cancel
                    </div>
                </div>
            </div>
        </div>
    </t>

    <t t-extend="ClientLine">
        <t t-jquery="tr.client-line" t-operation="replace">
            <tr class='client-line' t-att-data-id='partner.id'>
                <td><t t-esc='partner.name' /></td>
                <td><t t-esc='partner.phonetic_name || ""' /></td>
                <td><t t-esc='partner.id' /></td>
                <td><t t-esc='partner.phone or partner.mobile or ""' /></td>
            </tr>
        </t>
    </t>

    <t t-name="HistoryLine">
        <t t-jquery="tr.client-line" t-operation="replace">
            <tr>
                <td class="receipt_barcode receipt-button" t-att-hl_id="line.id" t-att-p_id="line.partner_id[0]">
                    <t t-esc='line.receipt_barcode || "" '/>
                </td>
                <td><t t-esc='line.date || ""' /></td>
                <td>
                    <t t-if="line.state == 'planned'">Started</t>
                    <t t-if="line.state == 'confirmed'">Confirmed</t>
                    <t t-if="line.state == 'progress'">Waiting Delivery</t>
                    <t t-if="line.state == 'cancel'">Canceled</t>
                    <t t-if="line.state == 'done'">Done</t>
                </td>
                <td><t t-esc='line.finishing_date || ""' /></td>
            </tr>
        </t>
    </t>

    <t t-extend="ClientListScreenWidget">
        <t t-jquery="input[placeholder='Search Customers']" t-operation="replace">
            <input placeholder='Search' />
        </t>

        <t t-jquery="table.client-list thead" t-operation="replace">
            <thead id="clientlist_head">
                <tr>
                    <th>Name</th>
                    <th>Phonetic Name</th>
                    <th>ID</th>
                    <th>Phone</th>
                </tr>
            </thead>
            <thead id="historylist_head" style="display: none;">
                <tr>
                    <th>Receipt ID</th>
                    <th>Date</th>
                    <th>Maintenance Status</th>
                    <th>Finish Date</th>
                </tr>
            </thead>
        </t>
    </t>

    <t t-name="NotebookList">
        <section class="subwindow">
            <div class="notebook-list">
                <span id="show_clients" class="notebook-button">
                    Customer List
                </span>
                <span id="show_history" class="notebook-button">
                    Transaction History
                </span>
            </div>
        </section>
    </t>

    <t t-name="ReceiptDataPopupWidget">
        <div class="modal-dialog">
            <div class="popup popup-confirm popup-receipt">
                <p class="title"><t t-esc="_t('Receipt Data')" /></p>
                <t t-set="hl" t-value="widget.options.history_line || {}"/>
                <div class="body">
                    <table class="tree-view-receipt">
                        <tr>
                            <th>Product</th>
                            <th>Barcode</th>
                            <th>Tag</th>
                            <th>Location</th>
                            <th>Location#</th>
                            <th>Delivery</th>
                        </tr>
                        <tr>
                            <t t-set="whs" t-value="hl.warehouse_ids"/>
                            <th><p><t t-esc=" hl.product_id &amp;&amp; hl.product_id[1] || '' " /></p></th>
                            <th><p><t t-esc=" hl.product_barcode || '' " /></p></th>
                            <th><p><t t-esc=" hl.tag || '' " /></p></th>
                            <th>
                                <t t-if="whs &amp;&amp; whs.length">
                                    <t t-foreach="whs" t-as='wh'>
                                        <p><t t-esc=" wh || '' " /></p>
                                    </t>
                                </t>
                            </th>
                            <th>
                                <t t-if="whs &amp;&amp; whs.length">
                                    <t t-foreach="whs" t-as='wh'>
                                        <p><t t-esc=" wh || '' " /></p>
                                    </t>
                                </t>
                            </th>
                            <th>
                                <t t-if="hl.state == 'done'">
                                    <p>Done</p>
                                    <div class="button state_changer" style="background-color: #ff0000b8!important;">
                                        Waiting Delivery
                                    </div>
                                </t>
                                <t t-if="hl.state == 'progress'">
                                    <p>Waiting Delivery</p>
                                    <div class="button state_changer" style="background-color: blue; color: white;">
                                        Done
                                    </div>
                                </t>
                                <t t-if="hl.state != 'cancel'">
                                    <div class="button state_cancel" style="background-color: #c8c8c8!important;">
                                        Cancel
                                    </div>
                                </t>
                                <t t-else=""><p>Canceled</p></t>
                            </th>
                        </tr>
                    </table>
                </div>
                <div class="footer">
                    <div class="button cancel">
                        Ok
                    </div>
                </div>
            </div>
        </div>
    </t>


    <t t-extend="OrderHistory">
        <t t-jquery=".actions.oe_hidden" t-operation="append">
            <span class="button sup_delivery"
                  t-att-cid="order.partner_id[0]">Delivery</span>
        </t>
    </t>

    <t t-extend="LineHistory">
        <t t-jquery="tr" t-operation="append">
            <td class="sub-delivery" style="display: none;"
                t-att-pid="line.product_id[0]">
                <span class="button state_changer"
                      style="display: none;">Delivery1</span>
                <span class="state_changer state_done"
                      style="display: none;">Done</span>
            </td>
        </t>
    </t>

    <t t-extend="LinesHeader">
        <t t-jquery="tr" t-operation="append">
            <th class="sub-delivery"  style="display: none;"></th>
        </t>
    </t>

</templates>
